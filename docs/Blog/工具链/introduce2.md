## 开始

chainreactors 将专注于红队自动化以及红队工具工件化. 如果要找一个类比, 可以参考[projectdiscovery](https://github.com/projectdiscovery). 确实, 我们也从pd参考借鉴了非常多的代码, 甚至部分工具直接移植了pd的代码与poc. 

为什么要在projectdiscovery之后再做类似的东西, 不是为了成为一个国产化的克隆pd 重复造轮子, 而是去做pd没有涉及的地方并兼容pd已有的东西, 例如pd没有顾及到的主动或被动url收集, 能与工具链联动的代理工具, 甚至是我们的终极目标, 红队协作的信息收集teamserver.

是的, 我们的目标就是实现一个足够强大的, 高可拓展的, 分布式的, 协作的信息收集与漏扫框架. 这一堆词拼凑出的印象大概就是这两年很火的攻击面管理(ASM), 安全自动化编排与相应(SOAR), 漏扫加上CobaltStrike式的teamserver的集合体.  目标很大, 但会一步一步实现.这个项目业余时间做了一年半, 完成了一两个成熟的工件, 以及三四个开发中的工件, 以及demo版本的框架. 

当我开始尝试开发这样的一个工具时, 我发现竟然除了pd之外, 其他工具极少有满足我们的想法的.  总会在各种各样的地方出现无法解决的问题, 而为了解决这些问题, 我们被迫先去开发了一系列工具链. 

## 蓝图

我们现在已经实现了一系列工具链以及一个自动化信息收集工具的demo版本. 不同于github 同类产品, 我们的工具除了pd的工具链之外, 绝大部分工具链都选择了自行研发, 而不是在github上找类似产品凑合用. 并且, 采用了全新的分布式设计以及高度解耦的模块化设计.

几个终极的目标(因为时间有限, 这个目标可能会非常久远, 但是我们的工具链会先行开源)

1. 实现自动化的信息收集, 拓扑绘制, 指纹与漏洞识别 (这一块同类工具非常多, 请相信chainreactors会带来惊喜)
2. 类似cs的teamserver式的协作半自动化内外网信息收集, 漏洞扫描, 用以填补自动化的不足
3. 足够强的可拓展性, 类似潮汐平台的自动化工具编排. 并不强制使用我们开发的原生的工具链, 也可以自行添加一些用户自己喜欢的工具

这些思路在提出的时候市面上并没有类似的产品, 但是闭门开发了一年多之后, 发现市场上已经有许多类似的创业公司, 只能说这两年hw与红队的需求是类似的. 大家因为有类似的需求, 自然而然的产生的类似的想法. 几乎每隔一两个月, 都会有一些沾沾自喜的创意会有其他人以各种方式公开. 

### 工具链

工具链与框架的需求是相互的, 如果需求复杂到需要一个单独的工具解决, 那就会新建一个项目.

我们将会保留pd的大部分工具, 并在此之上实现pd中没有覆盖的场景. 补全一个完整的工具链. 

### 为什么要保留projectdiscovery的工具链

先说pd的优势

1. 及其活跃的社区, 除了那几个效率非常高的核心开发者外, 还有一个活跃的社区, 每天都有数十个issue被处理, pr被合并. 我曾经提交了几个pr, 项目的负责人很快与我对接了需求, 进行review, 修改整理后合并. 
2. 优雅且统一的命令行UI, 特别是在输入输出上基本做到了统一, 大大减少学习成本. 
3. 足够的可拓展性, 我的水平并不能确定pd的核心开发者代码能力有多强, 但是我在提交pr或者二开的时候, 总能感受到pd开发者的细心.

因为这几点, 让pd的工具链就算有一些不足, 也能通过自行实现我的需求, 并且还能同步回社区. 因此, 我们决定, 将保留绝大部分pd的工具链, 例如 nuclei, subfinder, httpx, dnsx等等一系列工具

### gogo (端口扫描, 指纹识别, 简易漏洞扫描)

gogo的定位有点类似这两年大家很喜欢用的fscan, 不过功能会比fscan强大非常多, 当然代价是有一定学习成本(这与pd类似, 但会用尽可能统一的命令行UI降低学习成本).

gogo的使用场景主要是内网的拓扑测绘与自动化刷分, 以及在外网作为一个第二阶段(第一阶段是SYN扫描)的端口扫描器与基础信息收集工具.

gogo继承了nuclei的漏洞扫描能力与nuclei-template作为poc库, 指纹库使用了原创的格式, 也会尽可能的收集社区中有用的指纹. 而它与fscan最大的区别在于可高度自定义扫描逻辑, 这一点将会在关于gogo的文章中详细介绍, 是fscan目前完全无法代替的地方.

gogo是目前框架中最为成熟的项目,也将是计划中第一个公开的工具.  

他也是整个计划的开端, gogo的第一行代码比fscan还早上半年敲下, 到目前经过了近千次的commit与100个版本的迭代, 各种功能都已经非常强大, 并且还保留了非常强的可拓展性. 

### zombie (常见服务的口令爆破与喷洒, 批量执行)

zombie在社区中可以参考的工具大概是hydra与crackmapexec的结合体. 

zombie的使用场景是在内网中爆破各类服务的弱口令以及批量执行命令.

可以发现, fscan的功能被拆分到了gogo与zombie中, 这会给用户体验带来一定的割裂, 习惯了fscan的用户可能会嫌麻烦. 但是这样的好处是gogo的体积大大缩小, 内网的告警将会少非常多(在不启用gogo漏扫的情况下)以及zombie可以支持更复杂更灵活的功能.

当然, 为了减少这种割裂感, 我们也做出了一些努力, 例如gogo的扫描结果可以直接导入到zombie中, 实现类似fscan一把梭的效果.同时, zombie还将支持一些服务的后渗透, 加上zombie原生的批量属性. 所以最终设计出来的功能类似hydra与cme的结合体. 

zombie目前的功能正在重构中, 很快将会公开.

### spray (主动目录爆破, host爆破等http协议高并发任务)

如果只有一个目标, spray的基础功能与fuff的功能有些类似, 一个http fuzz工具. 但是额外添加了非常强的信息收集功能. 比如你会发现, 市面上的工具, 极少有在目录爆破阶段添加被动的指纹识别的, 也极少有能将垃圾目录过滤的. 这些spray都将实现.

更重要的是, spray支持同时对多个目标的目录喷洒, 防止高并发对单个目标的dos, 最大限度的利用服务器性能. 以及方便快速对大量目标进行处理. 对多个目标进行目录爆破与信息收集这一点我几乎没在其他工具上找到有类似的实现. 这也是重造轮子最大的原因.

在spray前, 我们也编写了一个关于目录fuzz的工具, 但是实现的不太理想, 也没有保留足够的可拓展性, 无法应对现实中非常复杂的场景, 所以我们决定完全推倒重新设计这个工具. 目录爆破实现起来其实非常复杂, 要考虑cdn, waf的影响, 要考虑目标服务器性能, 还要考虑目录的信息收集与过滤无效目录等等非常多的因素, 导致看起来非常简单的东西让老工具设计上先天不足, 这次我们将吸取教训, 重新设计一个http fuzz工具.

重新归来的spray将不只局限在目录上, 还将对403bypass, 备份文件, host爆破, url与js收集等等场景的支持. 

具体公开时间就不好说了, 目前刚推到重启, 大部分功能还没来得及实现. 如果等不及, 可以尝试下我们的老工具(mule), 顺便给我们一些建议.

### maitai



### meta-matrix



### ina与ani

### pd工具链



## Kindred (终极目标)

## 结语

我们毫无保留的公开了我们的设计理念与各种实践中积累的经验, 也欢迎社区提供更多的意见, 经验以及最重要的pr. 所有的工具链我们都将开源, 但是因为主业打红队, 用来并不能全身心投入到开发中, 有些功能将会一直是大饼.

目前也有不少与我们有重合的创业公司, 但我们将会保持开源, 为社区提供一个开源的选项, 不过为了防止有可能的冲突, 我们的开源协议不会选择商业化友好的协议, 只对个人使用者保持完全的开放.

因为部分工具正在开发中, 非常多功能没有实现, 也需要充分的测试才能公开, 所以暂时只对贡献者开放试用.

